---
title: 三数之和
date: 2022-08-09
author: 向阳
tag: 'Algorithm'
layout: '../../layouts/PostLayout.astro'
---

# 三数之和

> 因为是三数之和，如果 nums 的长度小于三个，那直接返回一个空数组
> 对数组进行排序，如果数组中的第一项大于 0，那么这个数组中必然每一项都大于零，也就不可能有三数之和为 0，这种情况直接返回一个空数组
> 同样的，如果排序后的数组中的最后一项小于 0，那数组中的每一项也必然都小于 0，这种情况也返回一个空数组
> 遍历数组，定义三个指针，分别指向排序后的第一个元素、第二个元素和最后一个元素，
> 这里说一下排序的原因，1： 排序之后方便去重；2：双端指针可以减少遍历的次数
> 在遍历的过程中，将三个指针指向的元素相加，如果相加的和为 0，则存入结果中。
> 如果遍历的当前元素和前一个元素是相等的，那说明这一项会跟前一项重复，所以跳过这次遍历，进行下一次遍历
> 如果三数相加的和大于 0，则说明较大的数偏大，这种情况下向左移动右指针，减小较大的数据
> 如果三数相加的和小于 0，则说明较小的数偏下，这种情况下向右移动左指针，增大较小的数据

## 完整代码如下

```javascript
var threeSum = function threeSum(nums) {
  // 保存结果
  let ret = []
  // 当数组长度小于3的时候直接返回空数组
  if (nums.length < 3) return ret
  // 记录数组长度
  let len = nums.length
  // 将数组从小到大排序
  nums.sort((a, b) => a - b)
  // 如果排序后的数组的第一项大于0或者最后一项小于零，直接返回空数组
  if (nums[0] > 0 || nums[len - 1] < 0) return ret
  // 遍历数组
  for (let i = 0; i < len - 2; i++) {
    // 表示当前元素与前一项重复，结束本次循环，进行下一次循环
    if (i > 0 && nums[i] === nums[i - 1]) continue
    // 定义左指针
    let L = i + 1
    // 定义右指针
    let R = len - 1
    // 通过while循环，控制左右指针的移动
    while (L < R) {
      // 求和
      const sum = nums[i] + nums[L] + nums[R]
      // 如果三数之和为 0
      if (sum === 0) {
        // 将对应的三个元素存入结果变量中
        ret.push([nums[i], nums[L], nums[R]])
        // 左指针去重
        while (L < R && nums[L] === nums[L + 1]) L++
        // 右指针去重
        while (L < R && nums[R] === nums[R - 1]) R--
        // 移动左右指针
        L++
        R--
      } else if (sum > 0) {
        // 如果三数之和大于 0，则向左移动右指针
        R--
      } else {
        // 如果三数之和小于0，则向右移动左指针
        L++
      }
    }
  }
  return ret
}

// let nums = [-1, 0, 1, 2, -1, -4]
// let nums = [0, 0, 0, 0]

let nums = [-2, 0, 1, 1, 2]

console.log(threeSum(nums))
```
