---
title: ä½ çœŸçš„äº†è§£Object.assign()å—ï¼Ÿ
author: å‘é˜³
pubDate: 2022-01-23
tag: 'JavaScript'
 
---

# ä½ çœŸçš„äº†è§£ Object.assign()å—ï¼Ÿ

`Object.assign()` è¿™ä¸ªæ–¹æ³•åœ¨å¼€å‘çš„æ—¶å€™ç®—æ˜¯ç”¨çš„æ¯”è¾ƒå¤šçš„ä¸€ä¸ªæ–¹æ³•äº†ï¼Œä½¿ç”¨ä»–çš„åœºæ™¯å¤§æ¦‚ä¹Ÿå°±æ˜¯åˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ªå¯¹è±¡ã€‚ä½†æ˜¯æœ€è¿‘åœ¨çœ‹çº¢å®ä¹¦çš„æ—¶å€™å‘ç°åœ¨ä½¿ç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™å¯èƒ½ä¼šå‡ºç°ä¸€äº›æ„æ–™ä¹‹å¤–çš„ç»“æœï¼Œè¿™æ˜¯æˆ‘ä¹‹å‰ä¸äº†è§£çš„ï¼Œæ‰€ä»¥ä»Šå¤©ä¹Ÿæ‹¿å‡ºæ¥åˆ†äº«ç»™å¤§å®¶ã€‚

## çº¢å®ä¹¦å®˜æ–¹å®šä¹‰

ECMAScript6 ä¸“é—¨ä¸ºåˆå¹¶å¯¹è±¡æä¾›äº†ä¸€ä¸ª `Object.assign()` æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€ä¸ªç›®æ ‡å¯¹è±¡å’Œä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œç„¶åå°†æ¯ä¸ªæºå¯¹è±¡ä¸­**å¯æšä¸¾**(`Object.propertyIsEnumerable()` è¿”å›å€¼ä¸º `true`)å’Œ **è‡ªæœ‰** (`Object.hasOwnProperty()` è¿”å› `true`) å±æ€§å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ã€‚ä»¥å­—ç¬¦ä¸²å’Œç¬¦å·ä¸ºé”®çš„å±æ€§ä¼šè¢«å¤åˆ¶ã€‚å¯¹æ¯ä¸ªç¬¦åˆæ¡ä»¶çš„å±æ€§ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šä½¿ç”¨æºå¯¹è±¡ä¸Šçš„ `[[Get]]` å–å¾—å±æ€§å€¼ï¼Œç„¶åä½¿ç”¨ç›®æ ‡å¯¹è±¡çš„ `[[Set]]` æ–¹æ³•è®¾ç½®å±æ€§å€¼ã€‚

emmmmï¼Œä»¥ä¸Šçš„å®šä¹‰æ˜¯æˆ‘ç…§ç€çº¢å®ä¹¦ä¸€ä¸ªå­—ä¸€ä¸ªå­—æ•²å‡ºæ¥çš„ ğŸ˜…ã€‚

## è‡ªå·±çš„ä¸€ç‚¹ç†è§£

1. `Object.assign()` æ˜¯ ES6 æä¾›çš„ä¸€ä¸ªç”¨æ¥åˆå¹¶å¯¹è±¡çš„æ–¹æ³•ã€‚
2. è¿™ä¸ªæ–¹æ³•å¯ä»¥æ¥æ”¶ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºè¿”å›çš„ç›®æ ‡å¯¹è±¡ï¼Œå‰©ä½™çš„å‚æ•°ä½œä¸ºæºå¯¹è±¡ã€‚
3. åœ¨ä»æºå¯¹è±¡å‘ç›®æ ‡å¯¹è±¡å¤åˆ¶å±æ€§çš„è¿‡ç¨‹ä¸­ï¼Œåªä¼šå¤åˆ¶æºå¯¹è±¡ä¸­å±æ€§æè¿°ç¬¦ `enumerable` å€¼ä¸º `true` å¹¶ä¸”æ˜¯æºå¯¹è±¡æœ¬èº«è€ŒéåŸå‹ä¸Šçš„å±æ€§ã€‚
4. å¤åˆ¶çš„æ—¶å€™ä»¥ `getter` è·å–æºå¯¹è±¡çš„å±æ€§å€¼ï¼Œä»¥ `setter` åœ¨ç›®æ ‡å¯¹è±¡ä¸Šå­˜å…¥è¯¥å€¼ã€‚

## ä¸Šä»£ç 

å¯†é›†çš„æ–‡å­—ï¼Œåœ¨é˜…è¯»çš„æ—¶å€™æ€»æ˜¯ä¼šè®©äººè§‰å¾—ä¹å‘³ï¼Œæˆ‘æ›´å–œæ¬¢çœ‹ä»£ç ï¼

é¦–å…ˆï¼Œ `Object.assign()` è¿™ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥åˆå¹¶å¯¹è±¡çš„ï¼Œè¿™åº”è¯¥æ²¡å•¥ç–‘é—®çš„ã€‚

```javascript
const obj1 = {
  name: 'å‘é˜³'
}

const obj2 = {
  age: '18'
}

const dest = Object.assign({}, obj1, obj2)
console.log(dest)
```

![](https://files.mdnice.com/user/17954/4f097e11-3955-4386-bd9a-d70734b895d3.png)

é‡ç‚¹ä¸åœ¨è¿™é‡Œï¼Œåœ¨åè¾¹çš„å†…å®¹~

å†æ¥çœ‹ä¸€æ®µä»£ç 

```javascript
const person = {}

Object.defineProperty(person, 'name', {
  value: 'å‘é˜³'
})

const dest = Object.assign({}, person)
console.log(dest)
```

é¦–å…ˆåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ `person`ï¼Œç„¶åé€šè¿‡ `Object.defineProperty()` è¿™ä¸ªæ–¹æ³•ç»™ `person` å¯¹è±¡ä¸Šè¾¹æ·»åŠ ä¸€ä¸ªå±æ€§ `name`ï¼Œå±æ€§å€¼ä¸º `å‘é˜³`ã€‚

æ¥ç€ä½¿ç”¨ `Ojbect.assign()` å°† `person` ä½œä¸ºæºå¯¹è±¡å’Œä¸€ä¸ªç©ºçš„ç›®æ ‡å¯¹è±¡è¿›è¡Œåˆå¹¶ã€‚
![](https://files.mdnice.com/user/17954/0c762212-8271-41f4-8f38-7de40687a054.png)

å’‹æ˜¯ä¸ªç©ºå¯¹è±¡ï¼Ÿ
![](https://files.mdnice.com/user/17954/48bdc69c-fa23-4cd2-81ff-f1d399d59c96.png)
æ˜¯çš„ï¼Œä½ æ²¡çœ‹é”™ï¼Œè¿™å°±æ˜¯åˆå¹¶åçš„ç»“æœï¼Œé€šè¿‡ `Object.definedProperty()` å®šä¹‰å‡ºæ¥çš„å±æ€§ï¼Œå¦‚æœä¸è®¾ç½®çš„è¯ï¼Œå±æ€§æè¿°ç¬¦ `enumerable` é»˜è®¤ä¸º `false`ï¼Œè€Œæ ¹æ®å®šä¹‰ï¼Œä¸å¯æšä¸¾çš„å±æ€§æ˜¯ä¸èƒ½è¢«å¤åˆ¶æ»´~ã€‚

ä¹Ÿå¯ä»¥é€šè¿‡ `Object.getOwnPropertyDescriptors()` æ‰“å°ä¸€ä¸‹çœ‹çœ‹ç°åœ¨ `person` å„ä¸ªå±æ€§æè¿°ç¬¦å¯¹åº”çš„å€¼ã€‚
![](https://files.mdnice.com/user/17954/36586cdf-c52e-44c0-8155-58fc7f3e54a7.png)
å…¨æ˜¯ `false`ã€‚

```javascript
const person = {}

Object.defineProperty(person, 'name', {
  value: 'å‘é˜³',
  enumerable: true // å°†å±æ€§è®¾ç½®ä¸ºå¯æšä¸¾
})

const dest = Object.assign({}, person)
console.log(dest)
```

ç°åœ¨å°†è¯¥å±æ€§çš„ `enumerable` è®¾ç½®ä¸º `true`ï¼Œå†æ¥çœ‹çœ‹ç»“æœ
![](https://files.mdnice.com/user/17954/76fcfcc3-892d-4a48-b732-fe7ae620d2b4.png)
âœŒğŸ»ï¼Œå·²ç»èƒ½å¤Ÿæ­£å¸¸åˆå¹¶äº†ã€‚

å› ä¸ºåˆå¹¶çš„è¿‡ç¨‹æ˜¯é€šè¿‡ `getter` è·å–çš„æºå¯¹è±¡çš„å±æ€§å€¼ï¼Œé€šè¿‡ `setter` å¯¹ç›®æ ‡å¯¹è±¡çš„å€¼è¿›è¡Œè®¾ç½®ï¼Œç»“åˆè¿™ä¸¤ä¸ªç‰¹æ€§ï¼Œå’±å†æ¥çœ‹çœ‹å¦ä¸€ç§æƒ…å†µã€‚

```javascript
const src = {}

Object.defineProperty(src, 'name', {
  enumerable: true, // å°†å±æ€§è®¾ç½®ä¸ºå¯æšä¸¾
  get() {
    return 'å‘é˜³'
  }
})

const target = {}
Object.defineProperty(target, 'name', {
  enumerable: true,
  get() {
    return this.store_name
  },
  set(val) {
    console.log(val)
    this.store_name = val
  }
})

target.name = 'å¤œæ®‡'

const dest = Object.assign(target, src)
console.log(dest)
```

é€šè¿‡ `getter` å‡½æ•°å’Œ `setter` å‡½æ•°æ¥è®¿é—®å’Œè®¾ç½®å¯¹è±¡çš„å±æ€§å€¼ï¼Œç°åœ¨å†æ¥çœ‹ä¸€ä¸‹ç»“æœã€‚
![](https://files.mdnice.com/user/17954/0ebf35a0-cc4d-4d30-a5dd-e0f3325edc9d.png)
ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œèƒ½æ­£å¸¸åˆå¹¶ï¼›ç°åœ¨å†æ¥ä¿®æ”¹ä¸€ä¸‹ä¸¤ä¸ªå¯¹è±¡ä¸­ `getter` å‡½æ•°å’Œ `setter` å‡½æ•°çš„å†…å®¹ã€‚

```javascript
const src = {}

Object.defineProperty(src, 'name', {
  enumerable: true, // å°†å±æ€§è®¾ç½®ä¸ºå¯æšä¸¾
  get() {
    return 'å‘é˜³'
  }
})

const target = {}
Object.defineProperty(target, 'name', {
  enumerable: true,
  get() {
    return this.store_name
  },
  set(val) {
    console.log(val)
    this.store_name = 'å¤œæ®‡'
  }
})

const dest = Object.assign(target, src)
console.log(dest)
```

å°†ç›®æ ‡å¯¹è±¡ `target` ä¸­ `name` å±æ€§çš„ `setter` å‡½æ•°åšä¸€ä¸‹ä¿®æ”¹ï¼Œä¸ç®¡åè¾¹å¯¹ `name` å±æ€§å¦‚ä½•èµ‹å€¼ï¼Œæˆ‘ä»¬éƒ½å°†å…¶è®¾ç½®ä¸º `å¤œæ®‡`ã€‚ç°åœ¨å†æ¥çœ‹çœ‹è¾“å‡ºçš„ç»“æœã€‚
![](https://files.mdnice.com/user/17954/3074fdf4-0d6d-4cf1-8181-17e39bb95533.png)
æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç›®æ ‡å¯¹è±¡ä¸­ `setter` å‡½æ•°ä¸­çš„ `val` å€¼ä»ç„¶æ˜¯ `å‘é˜³`ï¼Œä½†æ˜¯åˆå¹¶åçš„ç»“æœå´æ˜¯ `å¤œæ®‡`ã€‚

å½“ç„¶ï¼Œè¿™ç§æƒ…å†µåº”è¯¥æ˜¯æ¯”è¾ƒå°‘çš„ï¼Œæˆ–è€…åº”è¯¥è¯´ä¸åº”è¯¥ä¼šæœ‰è¿™ç§ä»£ç å‡ºç°åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­ï¼Œä¸‡ä¸€çœŸçš„æœ‰è¿™ç§ä»£ç ï¼Œè¿™é‡Œä¹Ÿç®—æ˜¯æä¾›äº†ä¸€ç§è°ƒè¯•çš„æ€è·¯ ğŸ˜„ã€‚

è¯´èµ·æ¥è¿™ç§è¿˜ç®—æ˜¯æ­£å¸¸çš„ï¼Œå¦‚æœå¯¹è±¡çš„ name å±æ€§çš„ `getter` å‡½æ•°æˆ–æ˜¯ `setter` å‡½æ•°ä¸­æŠ›å‡ºäº†ä¸€ä¸ªå¼‚å¸¸ï¼Œé‚£ ğŸ˜±â€¦â€¦åˆå¹¶å°±ä¼šæŠ¥é”™ã€‚

æ¥è¯•ä¸€ä¸‹å‘—â€¦â€¦

```javascript
const src = {}

Object.defineProperty(src, 'name', {
  enumerable: true, // å°†å±æ€§è®¾ç½®ä¸ºå¯æšä¸¾
  get() {
    throw new Error('merge error')
  }
})

const target = {}
Object.defineProperty(target, 'name', {
  enumerable: true,
  get() {
    return this.store_name
  },
  set(val) {
    console.log(val)
    this.store_name = 'å¤œæ®‡'
  }
})

const dest = Object.assign(target, src)
console.log(dest)
```

æ¥çœ‹çœ‹ç»“æœ
![](https://files.mdnice.com/user/17954/da7c9dfb-e257-4f85-910f-d67340d80eac.png)
åœ¨åˆå¹¶çš„æ—¶å€™ä¼šç›´æ¥æŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ã€‚ç›¸æ¯”è¾ƒè€Œè¨€ï¼Œè¿™ç§æƒ…å†µå‘ç”Ÿçš„æ¦‚ç‡ä¼šæ›´å¤§ä¸€äº›ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ `getter` å‡½æ•°æˆ–è€… `setter` å‡½æ•°å¯¹å±æ€§ä»£ç†åšä¸€äº›å¤„ç†çš„æ—¶å€™ï¼Œæœ‰å¯èƒ½å°±ä¼šå‡ºé”™ï¼Œå†å»æ‹¿å½“å‰å¯¹è±¡è·Ÿåˆ«çš„å¯¹è±¡åˆå¹¶ï¼Œå°±ä¼šæŠ¥é”™ã€‚

è‡³æ­¤è¦è®²çš„å†…å®¹å·²ç»å…¨éƒ¨ç»“æŸï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ©ï¼Œå¦‚æœæœ‰çœ‹ä¸æ˜ç™½æˆ–è€…è®²çš„ä¸å¯¹çš„åœ°æ–¹æ¬¢è¿æŒ‡æ­£~
![](https://files.mdnice.com/user/17954/914985e9-373e-4755-bc9a-0b5969a13c52.png)

æœ€åè¡¥ä¸€å¥ï¼Œä½œä¸ºä¸€ä¸ªå‰ç«¯çš„ developerï¼Œç°åœ¨æ‰å¼€å§‹ç²¾è¯»çº¢å®ä¹¦ï¼Œæˆ‘å¾ˆæƒ­æ„§â€¦â€¦
![](https://files.mdnice.com/user/17954/de44b0ae-dfa0-47aa-a965-e8aba9c3688b.png)
å¦‚æœè§‰å¾—å†…å®¹å¯¹ä½ æœ‰ç”¨çš„è¯ï¼Œæ¬¢è¿å…³æ³¨å“¦~
![](https://img.soogif.com/5HkHKKxGJ6ZmhQ7c8nLYOE9jfEXDpqp4.gif?scope=mdnice)
